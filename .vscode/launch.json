{
    // 使用 IntelliSense 了解相关属性。 
    // 悬停以查看现有属性的描述。
    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        // {
        //     "type": "bashdb",
        //     "request": "launch",
        //     "name": "Bash-Debug (simplest configuration)",
        //     "program": "${file}"
        // }
        {
            "name": "Python: File",
            "type": "python",
            "request": "launch",
            "program": "/usr/local/lib/python3.8/dist-packages/torch/distributed/run.py",
            "justMyCode": true,
            "args": [
                "--nproc_per_node",
                "4",
                "--nnodes",
                "1",
                "--node_rank",
                "0",
                "--master_addr",
                "localhost",
                "--master_port",
                "6000",
                "/root/HybridPipe-Megatron-DeepSpeed/pretrain_gpt.py",
                "--pipeline-model-parallel-size",
                "4",
                // "--num-layers-per-virtual-pipeline-stage",
                // "2",
                "--enable-bdv-schedule",
                "--num-layers",
                "16",
                "--hidden-size",
                "768",
                "--num-attention-heads",
                "12",
                "--seq-length",
                "1024",
                "--max-position-embeddings",
                "1024",
                "--micro-batch-size",
                "4",
                "--global-batch-size",
                "16",
                "--lr",
                "0.00015",
                "--train-iters",
                "500000",
                "--lr-decay-iters",
                "320000",
                "--lr-decay-style",
                "cosine",
                "--min-lr",
                "1.0e-5",
                "--weight-decay",
                "1e-2",
                "--lr-warmup-fraction",
                ".01",
                "--clip-grad",
                "1.0",
                "--fp16",
                "--data-path",
                "/data/gpt2-openwebtext-data/my-gpt2_text_document",
                "--vocab-file",
                "/data/gpt2-openwebtext-data/gpt2-vocab.json",
                "--merge-file",
                "/data/gpt2-openwebtext-data/gpt2-merges.txt",
                "--data-impl",
                "mmap",
                "--split",
                "949,50,1",
                "--log-interval",
                "100",
                "--save-interval",
                "10000",
                "--eval-interval",
                "1000",
                "--eval-iters",
                "10",
                "--distributed-backend",
                "nccl",
                "--save",
                "/data/gpt2-openwebtext-data/gpt2_test",
                "--load",
                "/data/gpt2-openwebtext-data/gpt2_test"
            ],
            "env": {
                "CUDA_DEVICE_MAX_CONNECTIONS": "1",
                "CUDA_VISIBLE_DEVICES": "0,4,5,6",
                "NCCL_DEBUG": "INFO"
            }
        }
    ]
}